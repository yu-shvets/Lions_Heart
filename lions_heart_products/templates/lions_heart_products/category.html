{% extends 'lions_heart_products/index.html' %}
{% load widget_tweaks %}
{% load i18n %}
{% load mytemplatetags %}
{% load static from staticfiles %}

{% block content %}

    <!-- MAIN CONTENT-->
    <main class="main">

      <section class="section catalog">
        <div class="container">

        <div class="row">
            <div class="col-md-12">
               <h2 class="section__title section__title_catalog">{% trans 'Collection' %}</h2>
             </div>
           </div>
           <div class="row">
             <div class="col-md-12">
                 <div class="row">
                   <div class="col-md-4">
                     <!--SEX FILTERS-->
                       {% for collection in collections %}
                       <a class="catalog__category" href="{% url 'category_collection' categs.pk collection.pk %}">{{ collection.title }}</a>
                       {% endfor %}
                   </div>

      <nav class="nav align-right">
                       <ul class="nav__list">
                       </ul>
                  </nav>


        {% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

                 {% if selected %}
                 <div class="row">
            <div class="col-md-3 align-center">
              <div class="catalog__main"><span>
                  <div class="section__subtitle"></div><img src="{{ selected.logo_image.url }}">
                  <p class="section__text section__text_neutral mt-30">{{ selected.description }}</p></span></div>
            </div>
                 {% endif %}

              {% for item in object_list %}

            <div class="col-md-3 align-center">
              <div class="product"><span><a class="product__link" href="{% url 'item' item.pk  %}"><img class="product__img" src="{{ item.title_image.url }}"></a>
                  <div class="product__wrap"><a class="section__text section__text_dark" href="{% url 'item' item.pk  %}">{{ item.title }}</a>
                    <p class="section__text section__text_dark">{{ item.price|convert }}<span> {% trans 'UAH' %}</span></p>
                   <a href="{% url 'add_to_cart' item.pk %}"><button class="button button_uppercase product__button">{% trans 'Add to cart' %}</button></a>
                  </div>
              </span>
              </div>
            </div>

              {% endfor %}

          <div class="row">
            <div class="col-md-12">
              <p class="number align-center">

    {% if is_paginated %}
  <ul class="pagination">
    {% if page_obj.has_previous %}
      <li><a href="?{% url_replace request 'page' page_obj.previous_page_number %}">&laquo;</a></li>
    {% else %}
      <li class="disabled"><span>&laquo;</span></li>
    {% endif %}
    {% for i in paginator.page_range %}
      {% if page_obj.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li><a href="?{% url_replace request 'page' i %}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if page_obj.has_next %}
      <li><a href="?{% url_replace request 'page' page_obj.next_page_number %}">&raquo;</a></li>
    {% else %}
      <li class="disabled"><span>&raquo;</span></li>
    {% endif %}
       </ul>
{% endif %}

{#                  <div class="loading" style="display: none;">#}
{#    Loading...#}
{#  </div>#}
{##}
{#  {% if page_obj.has_next %}#}
{#    <a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}">More</a>#}
{#  {% endif %}#}

  <script>
    var infinite = new Waypoint.Infinite({
      element: $('.infinite-container')[0],
      onBeforePageLoad: function () {
        $('.loading').show();
      },
      onAfterPageLoad: function ($items) {
        $('.loading').hide();
      }
    });
  </script>



            </div>
          </div>
        </div>
               </div>
      </section>

    </main>




    {% endblock content %}