{% extends 'lions_heart_products/index.html' %}
{% load static from staticfiles %}
{% load widget_tweaks %}
{% load i18n %}

{% block content %}

    <!-- MAIN CONTENT-->
    <main class="main">
      <section class="section cart">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h2 class="section__title section__title_catalog">{% trans 'Cart' %}</h2>
            </div>
          </div>
          <div class="row">
            <div class="col-md-9">
              <table class="cart__table">
                <thead>
                  <tr class="cart__table-row">
                    <th class="cart__table-title"></th>
                    <th class="cart__table-title">{% trans 'Quantity' %}</th>
                    <th class="cart__table-title">{% trans 'Price' %}</th>
                    <th class="cart__table-title">{% trans 'Cost' %}</th>
                    <th class="cart__table-title"></th>
                  </tr>
                </thead>
                <tbody>

                {% for item in cart %}

                  <tr class="cart__table-row">
                    <td class="cart__table-data"><a class="cart__table-main" href="#">
                        <div class="cart__table-thumbnail" href="#"><img class="cart__table-img" src="{{ item.item.title_image.url }}"></div>
                        <h4 class="section__text section__text_dark">{{ item.item.title }}</h4></a></td>
                    <td class="cart__table-data cart__table-quantity">
{#                      <button class="button button_transparent cart__table-btn" data-step="1"><img class="cart__table-plus" src="{% static "lions_heart_products/img/triangle.jpg" %}" alt="plus"></button>#}
{#                      <input class="cart__table-result" type="number">#}
{#                      <button class="button button_transparent cart__table-btn" data-step="-1"><img class="cart__table-minus" src="{% static "lions_heart_products/img/triangle.jpg" %}" alt="minus"></button>#}



                        <form method="post" action="{% url 'cart_update'  item.item.pk %}" class="update" id="form-{{ item.item.id }}">
                            {% csrf_token %}

                                <input name="new_quantity" class="cart__table-result update_q" type="number" value="{{ item.quantity }}">

                        </form>

                    </td>
                    <td class="cart__table-data">
                      <p class="section__text section__text_dark">{{ item.price }}</p>
                    </td>
                    <td class="cart__table-data">
                      <p class="section__text section__text_dark" id="sum-{{ item.item.id }}">{{ item.total_price }}</p>
                    </td>
                    <td class="cart__table-data"><a class="btn btn-primary" href="{% url 'cart_remove' item.item.pk %}" role="button">&times;</a></td>
                  </tr>

                {% endfor %}

                </tbody>
              </table>
            </div>
            <div class="col-md-3">
              <div class="section__item align-center cart__item">
                <p class="section__text section__text_dark section__text_mb-0">{% trans 'Total cost' %}</p>
                <p class="section__title section__title_dark cart__pay" id="total_price">{{ total_price }} {% trans 'UAH' %}</p>
                <a href="{% url 'order' %}"><button class="button button_light button_uppercase button_bg-dark product__button">{% trans 'Checkout' %}</button></a>
              </div>
            </div>
          </div>
          <!--RECOMENDATION GOODS-->
          <div class="row">
            <div class="col-md-12">
              <h2 class="sp__recomendation align-center">{% trans 'Recommended items' %}</h2>


              {% for item in cart %}
                  {% for item in item.item.recommended_items.all %}
                <div class="col-md-3 align-center">
                <div class="product"><span><a class="product__link"><img class="produxct__img" src="{{ item.title_image.url }}"></a>
                    <div class="product__wrap"><a class="section__text section__text_dark" href="#">{{ item.title }}</a>
                      <p class="section__text section__text_dark">{{ item.price }}<span>{% trans 'UAH' %}</span></p>
                      <a href="{% url 'add_to_cart' item.pk %}"><button class="button button_light button_uppercase button_bg-dark product__button">{% trans 'Add to cart' %}</button></a>
                    </div></span></div>
                </div>
                  {% endfor %}
              {% endfor %}


            </div>
          </div>
        </div>
      </section>
    </main>

{% endblock content %}
